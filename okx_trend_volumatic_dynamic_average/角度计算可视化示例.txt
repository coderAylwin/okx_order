═══════════════════════════════════════════════════════════════════════════
  布林带中轨角度开仓条件 - 可视化示例
═══════════════════════════════════════════════════════════════════════════

【配置参数】
  - bb_midline_period = 14 (EMA中轨周期)
  - bb_angle_window_size = 14 (角度计算窗口)
  - bb_angle_threshold = 0.06° (角度阈值)
  - bb_r_squared_threshold = 0.55 (R²阈值)

═══════════════════════════════════════════════════════════════════════════
情况1: 强上涨趋势 → ✅ 满足开多条件
═══════════════════════════════════════════════════════════════════════════

价格走势图（14根K线的EMA中轨）:
    
    1000 ┤                                    ╱─── 线性回归线
     995 ┤                                 ╱
     990 ┤                              ╱
     985 ┤                           ╱
     980 ┤                        ╱
     975 ┤                     ╱
     970 ┤                  ╱
     965 ┤               ╱
     960 ┤            ╱
     955 ┤         ╱
     950 ┤      ╱
     945 ┤   ╱
     940 ┤╱─── EMA中轨（平滑上升）
     935 ┤
        └─────────────────────────────────────
          K1 K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14

计算结果:
  ├─ 角度: +0.15° (满足 > 0.06°) ✅
  ├─ R²: 0.75 (满足 ≥ 0.55) ✅
  ├─ 趋势: 上升
  └─ 开仓信号: ✅ 可开多

═══════════════════════════════════════════════════════════════════════════
情况2: 强下跌趋势 → ✅ 满足开空条件
═══════════════════════════════════════════════════════════════════════════

价格走势图（14根K线的EMA中轨）:
    
    1000 ┤╱
     995 ┤   ╲
     990 ┤      ╲
     985 ┤         ╲
     980 ┤            ╲
     975 ┤               ╲
     970 ┤                  ╲
     965 ┤                     ╲
     960 ┤                        ╲
     955 ┤                           ╲
     950 ┤                              ╲
     945 ┤                                 ╲
     940 ┤                                    ╲─── 线性回归线
     935 ┤                                       ╲
     930 ┤                                          ╲
        └─────────────────────────────────────
          K1 K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14
          EMA中轨（平滑下降）

计算结果:
  ├─ 角度: -0.12° (满足 < -0.06°) ✅
  ├─ R²: 0.68 (满足 ≥ 0.55) ✅
  ├─ 趋势: 下降
  └─ 开仓信号: ✅ 可开空

═══════════════════════════════════════════════════════════════════════════
情况3: 震荡市场 → ❌ 不满足开仓条件（你的例子）
═══════════════════════════════════════════════════════════════════════════

价格走势图（14根K线的EMA中轨）:
    
    1000 ┤        ╱╲     ╱╲
     995 ┤      ╱  ╲   ╱  ╲
     990 ┤    ╱    ╲ ╱    ╲
     985 ┤  ╱        ╲        ╲
     980 ┤╱          ╲╱        ╲
     975 ┤            ╲        ╱
     970 ┤              ╲    ╱
     965 ┤                ╲╱
     960 ┤────────────────────────── EMA中轨（横盘震荡）
     955 ┤
        └─────────────────────────────────────
          K1 K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14

计算结果:
  ├─ 角度: -0.0559° (不满足 < -0.06° 或 > 0.06°) ❌
  ├─ R²: 0.698 (满足 ≥ 0.55) ✅
  ├─ 趋势: 震荡（角度不足）
  └─ 开仓信号: ❌ 不开仓

说明: 虽然R²较高（0.698），说明数据点相对集中，但角度绝对值
      (-0.0559°) 小于阈值 (0.06°)，判定为震荡市场，不开仓。

═══════════════════════════════════════════════════════════════════════════
情况4: 弱上涨趋势 → ❌ 不满足开仓条件
═══════════════════════════════════════════════════════════════════════════

价格走势图（14根K线的EMA中轨）:
    
    1000 ┤                    ╱─── 线性回归线（轻微上升）
     995 ┤                 ╱
     990 ┤              ╱
     985 ┤           ╱
     980 ┤        ╱
     975 ┤     ╱
     970 ┤  ╱
     965 ┤╱─── EMA中轨（缓慢上升）
     960 ┤
        └─────────────────────────────────────
          K1 K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14

计算结果:
  ├─ 角度: +0.04° (不满足 > 0.06°) ❌
  ├─ R²: 0.65 (满足 ≥ 0.55) ✅
  ├─ 趋势: 震荡（角度不足）
  └─ 开仓信号: ❌ 不开仓

说明: 虽然R²满足，但角度太小，趋势强度不够，不值得开仓。

═══════════════════════════════════════════════════════════════════════════
情况5: 波动上涨但R²不足 → ❌ 不满足开仓条件
═══════════════════════════════════════════════════════════════════════════

价格走势图（14根K线的EMA中轨）:
    
    1000 ┤              ╱  ╲
     995 ┤            ╱    ╲
     990 ┤          ╱        ╲
     985 ┤        ╱            ╲
     980 ┤      ╱                ╲
     975 ┤    ╱                    ╲
     970 ┤  ╱                        ╲
     965 ┤╱                            ╲─── 线性回归线（上升但波动大）
     960 ┤
        └─────────────────────────────────────
          K1 K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14
          EMA中轨（总体上升但波动大）

计算结果:
  ├─ 角度: +0.10° (满足 > 0.06°) ✅
  ├─ R²: 0.45 (不满足 ≥ 0.55) ❌
  ├─ 趋势: 震荡（R²不足）
  └─ 开仓信号: ❌ 不开仓

说明: 虽然角度满足，但R²太低，说明数据点分散，可能是震荡中的
      反弹，不是真正的趋势，不开仓。

═══════════════════════════════════════════════════════════════════════════
关键理解
═══════════════════════════════════════════════════════════════════════════

1. 角度（Angle）: 衡量趋势的强度
   - 正角度 = 上升趋势
   - 负角度 = 下降趋势
   - 绝对值越大 = 趋势越强

2. R²（拟合优度）: 衡量趋势的可靠性
   - R²高 = 数据点紧密围绕回归线，趋势明确
   - R²低 = 数据点分散，可能是震荡

3. 开仓条件: 需要同时满足角度和R²阈值
   - 只有角度满足但R²不足 = 可能是震荡中的反弹/回调
   - 只有R²满足但角度不足 = 趋势太弱，不值得开仓

4. 你的例子分析:
   - 角度: -0.0559° (绝对值 < 0.06°) ❌
   - R²: 0.698 (> 0.55) ✅
   - 结论: 虽然是下降趋势，但趋势强度不够，判定为震荡，不开仓

═══════════════════════════════════════════════════════════════════════════

