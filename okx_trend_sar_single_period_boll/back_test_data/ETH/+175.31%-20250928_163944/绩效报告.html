
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETH - SAR Single Period Trend Filter 策略绩效报告</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 30px;
        }
        .header {
            text-align: center;
            border-bottom: 3px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #007bff;
            margin: 0;
            font-size: 2.5rem;
        }
        .header p {
            color: #666;
            margin: 10px 0 0 0;
            font-size: 1.1rem;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .metric-card.positive {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        .metric-card.negative {
            background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
        }
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .chart-container {
            margin: 40px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
        }
        .chart-wrapper {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        .chart-title {
            text-align: center;
            color: #007bff;
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: bold;
        }
        .section {
            margin: 40px 0;
        }
        .section h2 {
            color: #007bff;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .nav-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        .nav-table th, .nav-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .nav-table th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        .nav-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .nav-table tr:hover {
            background-color: #f5f5f5;
        }
        .summary-box {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📈 ETH - SAR Single Period Trend Filter 策略绩效报告</h1>
            <p>生成时间: 2025-09-28 16:39:51</p>
            <p>回测期间: 2025-01-01 至 2025-09-27 (270 天)</p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card positive">
                <div class="metric-label">💰 总收益率</div>
                <div class="metric-value">+111.52%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">📈 年化收益率</div>
                <div class="metric-value">+175.31%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">⚠️ 最大回撤</div>
                <div class="metric-value">-22.37%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">🎯 夏普比率</div>
                <div class="metric-value">3.77</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">📉 年化波动率</div>
                <div class="metric-value">45.73%</div>
            </div>
            <div class="metric-card positive">
                <div class="metric-label">🎯 胜率</div>
                <div class="metric-value">50.4%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">📊 盈亏比</div>
                <div class="metric-value">1.15</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">🔄 总交易次数</div>
                <div class="metric-value">877</div>
            </div>
        </div>
        
        <div class="summary-box">
            <h3>📊 资金概览</h3>
            <p><strong>初始资金:</strong> $100,000.00</p>
            <p><strong>最终净值:</strong> $211,519.27</p>
            <p><strong>净盈亏:</strong> $111,519.27</p>
        </div>
        
        <div class="summary-box">
            <h3>📈 交易统计</h3>
            <p><strong>总交易次数:</strong> 877 次</p>
            <p><strong>盈利交易:</strong> 442 次</p>
            <p><strong>亏损交易:</strong> 435 次</p>
            <p><strong>胜率:</strong> 50.4%</p>
            <p><strong>盈亏比:</strong> 1.15</p>
        </div>
        
        <div class="summary-box">
            <h3>⚙️ 策略配置</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4>📊 单周期SAR策略参数</h4>
                    <p><strong>时间周期:</strong> 1h</p>
                    <p><strong>指标周期:</strong> 14</p>
                </div>
                <div>
                    <h4>🎯 SAR参数</h4>
                    <p><strong>起始值:</strong> 0.02</p>
                    <p><strong>递增值:</strong> 0.02</p>
                    <p><strong>最大值:</strong> 0.14</p>
                </div>
            </div>
            <div style="margin-top: 15px;">
                <h4>💰 止盈止损配置</h4>
                <p><strong>固定止盈:</strong> 1.5%</p>
                <p><strong>最大亏损:</strong> 3.0%</p>
            </div>
        </div>
        
        <div class="chart-container">
            <h2>📈 绩效图表</h2>
            
            <div class="chart-title">💰 净值曲线</div>
            <div class="chart-wrapper">
                <canvas id="navChart"></canvas>
            </div>
            
            <div class="chart-title">📊 累计收益率</div>
            <div class="chart-wrapper">
                <canvas id="returnChart"></canvas>
            </div>
            
            <div class="chart-title">📉 回撤分析</div>
            <div class="chart-wrapper">
                <canvas id="drawdownChart"></canvas>
            </div>
        </div>
        
        <div class="section">
            <h2>📋 每日净值明细</h2>
            <table class="nav-table">
        <thead>
            <tr>
                <th>日期</th>
                <th>价格</th>
                <th>持仓</th>
                <th>持仓价值</th>
                <th>现金余额</th>
                <th>总净值</th>
                <th>日收益率</th>
                <th>累计收益率</th>
                <th>回撤</th>
            </tr>
        </thead>
        <tbody>
        
            <tr>
                <td>2025-08-29</td>
                <td>$4,314.09</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$214,402.59</td>
                <td>$214,402.59</td>
                <td>-0.30%</td>
                <td>+114.40%</td>
                <td>-4.27%</td>
            </tr>
            
            <tr>
                <td>2025-08-30</td>
                <td>$4,374.23</td>
                <td>short</td>
                <td>$206,781.66</td>
                <td>$41.20</td>
                <td>$206,822.86</td>
                <td>-3.54%</td>
                <td>+106.82%</td>
                <td>-7.65%</td>
            </tr>
            
            <tr>
                <td>2025-08-31</td>
                <td>$4,482.61</td>
                <td>long</td>
                <td>$204,917.14</td>
                <td>$40.81</td>
                <td>$204,957.95</td>
                <td>-0.90%</td>
                <td>+104.96%</td>
                <td>-8.48%</td>
            </tr>
            
            <tr>
                <td>2025-09-01</td>
                <td>$4,359.71</td>
                <td>short</td>
                <td>$199,791.12</td>
                <td>$40.19</td>
                <td>$199,831.31</td>
                <td>-2.50%</td>
                <td>+99.83%</td>
                <td>-10.77%</td>
            </tr>
            
            <tr>
                <td>2025-09-02</td>
                <td>$4,293.21</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$202,279.11</td>
                <td>$202,279.11</td>
                <td>+1.22%</td>
                <td>+102.28%</td>
                <td>-9.68%</td>
            </tr>
            
            <tr>
                <td>2025-09-03</td>
                <td>$4,477.06</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$202,830.42</td>
                <td>$202,830.42</td>
                <td>+0.27%</td>
                <td>+102.83%</td>
                <td>-9.43%</td>
            </tr>
            
            <tr>
                <td>2025-09-04</td>
                <td>$4,302.57</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$203,700.54</td>
                <td>$203,700.54</td>
                <td>+0.43%</td>
                <td>+103.70%</td>
                <td>-9.04%</td>
            </tr>
            
            <tr>
                <td>2025-09-05</td>
                <td>$4,281.00</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$207,121.34</td>
                <td>$207,121.34</td>
                <td>+1.68%</td>
                <td>+107.12%</td>
                <td>-7.52%</td>
            </tr>
            
            <tr>
                <td>2025-09-06</td>
                <td>$4,268.00</td>
                <td>short</td>
                <td>$206,105.13</td>
                <td>$41.42</td>
                <td>$206,146.56</td>
                <td>-0.47%</td>
                <td>+106.15%</td>
                <td>-7.95%</td>
            </tr>
            
            <tr>
                <td>2025-09-07</td>
                <td>$4,297.23</td>
                <td>long</td>
                <td>$207,012.61</td>
                <td>$41.38</td>
                <td>$207,053.98</td>
                <td>+0.44%</td>
                <td>+107.05%</td>
                <td>-7.55%</td>
            </tr>
            
            <tr>
                <td>2025-09-08</td>
                <td>$4,370.00</td>
                <td>long</td>
                <td>$205,506.68</td>
                <td>$40.62</td>
                <td>$205,547.30</td>
                <td>-0.73%</td>
                <td>+105.55%</td>
                <td>-8.22%</td>
            </tr>
            
            <tr>
                <td>2025-09-09</td>
                <td>$4,284.51</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$199,746.75</td>
                <td>$199,746.75</td>
                <td>-2.82%</td>
                <td>+99.75%</td>
                <td>-10.81%</td>
            </tr>
            
            <tr>
                <td>2025-09-10</td>
                <td>$4,403.66</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$200,602.70</td>
                <td>$200,602.70</td>
                <td>+0.43%</td>
                <td>+100.60%</td>
                <td>-10.43%</td>
            </tr>
            
            <tr>
                <td>2025-09-11</td>
                <td>$4,410.85</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$198,572.43</td>
                <td>$198,572.43</td>
                <td>-1.01%</td>
                <td>+98.57%</td>
                <td>-11.33%</td>
            </tr>
            
            <tr>
                <td>2025-09-12</td>
                <td>$4,541.00</td>
                <td>long</td>
                <td>$202,095.84</td>
                <td>$40.47</td>
                <td>$202,136.31</td>
                <td>+1.79%</td>
                <td>+102.14%</td>
                <td>-9.74%</td>
            </tr>
            
            <tr>
                <td>2025-09-13</td>
                <td>$4,655.33</td>
                <td>short</td>
                <td>$202,899.30</td>
                <td>$41.08</td>
                <td>$202,940.38</td>
                <td>+0.40%</td>
                <td>+102.94%</td>
                <td>-9.38%</td>
            </tr>
            
            <tr>
                <td>2025-09-14</td>
                <td>$4,584.07</td>
                <td>short</td>
                <td>$204,705.77</td>
                <td>$41.42</td>
                <td>$204,747.20</td>
                <td>+0.89%</td>
                <td>+104.75%</td>
                <td>-8.58%</td>
            </tr>
            
            <tr>
                <td>2025-09-15</td>
                <td>$4,498.90</td>
                <td>short</td>
                <td>$201,066.19</td>
                <td>$40.50</td>
                <td>$201,106.69</td>
                <td>-1.78%</td>
                <td>+101.11%</td>
                <td>-10.20%</td>
            </tr>
            
            <tr>
                <td>2025-09-16</td>
                <td>$4,465.00</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$205,671.58</td>
                <td>$205,671.58</td>
                <td>+2.27%</td>
                <td>+105.67%</td>
                <td>-8.16%</td>
            </tr>
            
            <tr>
                <td>2025-09-17</td>
                <td>$4,487.50</td>
                <td>short</td>
                <td>$201,197.96</td>
                <td>$40.27</td>
                <td>$201,238.23</td>
                <td>-2.16%</td>
                <td>+101.24%</td>
                <td>-10.14%</td>
            </tr>
            
            <tr>
                <td>2025-09-18</td>
                <td>$4,597.09</td>
                <td>long</td>
                <td>$207,195.44</td>
                <td>$41.42</td>
                <td>$207,236.86</td>
                <td>+2.98%</td>
                <td>+107.24%</td>
                <td>-7.47%</td>
            </tr>
            
            <tr>
                <td>2025-09-19</td>
                <td>$4,472.72</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$210,880.46</td>
                <td>$210,880.46</td>
                <td>+1.76%</td>
                <td>+110.88%</td>
                <td>-5.84%</td>
            </tr>
            
            <tr>
                <td>2025-09-20</td>
                <td>$4,495.71</td>
                <td>long</td>
                <td>$210,353.37</td>
                <td>$41.98</td>
                <td>$210,395.35</td>
                <td>-0.23%</td>
                <td>+110.40%</td>
                <td>-6.06%</td>
            </tr>
            
            <tr>
                <td>2025-09-21</td>
                <td>$4,480.22</td>
                <td>short</td>
                <td>$209,189.98</td>
                <td>$41.82</td>
                <td>$209,231.80</td>
                <td>-0.55%</td>
                <td>+109.23%</td>
                <td>-6.57%</td>
            </tr>
            
            <tr>
                <td>2025-09-22</td>
                <td>$4,165.79</td>
                <td>long</td>
                <td>$209,758.77</td>
                <td>$42.20</td>
                <td>$209,800.97</td>
                <td>+0.27%</td>
                <td>+109.80%</td>
                <td>-6.32%</td>
            </tr>
            
            <tr>
                <td>2025-09-23</td>
                <td>$4,179.05</td>
                <td>long</td>
                <td>$207,171.81</td>
                <td>$41.68</td>
                <td>$207,213.49</td>
                <td>-1.23%</td>
                <td>+107.21%</td>
                <td>-7.48%</td>
            </tr>
            
            <tr>
                <td>2025-09-24</td>
                <td>$4,163.52</td>
                <td>long</td>
                <td>$208,227.21</td>
                <td>$41.75</td>
                <td>$208,268.96</td>
                <td>+0.51%</td>
                <td>+108.27%</td>
                <td>-7.00%</td>
            </tr>
            
            <tr>
                <td>2025-09-25</td>
                <td>$4,000.50</td>
                <td>short</td>
                <td>$210,742.74</td>
                <td>$42.27</td>
                <td>$210,785.01</td>
                <td>+1.21%</td>
                <td>+110.79%</td>
                <td>-5.88%</td>
            </tr>
            
            <tr>
                <td>2025-09-26</td>
                <td>$3,943.81</td>
                <td>long</td>
                <td>$209,705.39</td>
                <td>$42.08</td>
                <td>$209,747.47</td>
                <td>-0.49%</td>
                <td>+109.75%</td>
                <td>-6.34%</td>
            </tr>
            
            <tr>
                <td>2025-09-27</td>
                <td>$4,016.42</td>
                <td>short</td>
                <td>$211,476.96</td>
                <td>$42.31</td>
                <td>$211,519.27</td>
                <td>+0.84%</td>
                <td>+111.52%</td>
                <td>-5.55%</td>
            </tr>
            </tbody></table><p style="text-align: center; color: #666; margin-top: 10px;">* 仅显示最近30天数据，完整数据共270天</p>
        </div>
        
        <div class="footer">
            <p>🤖 由 SAR Single Period Trend Filter 策略自动生成</p>
        </div>
    </div>

    <script>
        // 图表数据
        const chartData = {"dates": ["2025-01-01", "2025-01-02", "2025-01-03", "2025-01-04", "2025-01-05", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-09", "2025-01-10", "2025-01-11", "2025-01-12", "2025-01-13", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-18", "2025-01-19", "2025-01-20", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-25", "2025-01-26", "2025-01-27", "2025-01-28", "2025-01-29", "2025-01-30", "2025-01-31", "2025-02-01", "2025-02-02", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-08", "2025-02-09", "2025-02-10", "2025-02-11", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-15", "2025-02-16", "2025-02-17", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-22", "2025-02-23", "2025-02-24", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-01", "2025-03-02", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-08", "2025-03-09", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-15", "2025-03-16", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-20", "2025-03-21", "2025-03-22", "2025-03-23", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-29", "2025-03-30", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-05", "2025-04-06", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-12", "2025-04-13", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-19", "2025-04-20", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-26", "2025-04-27", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-03", "2025-05-04", "2025-05-05", "2025-05-06", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-10", "2025-05-11", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-17", "2025-05-18", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-24", "2025-05-25", "2025-05-26", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-05-31", "2025-06-01", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-07", "2025-06-08", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-14", "2025-06-15", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-19", "2025-06-20", "2025-06-21", "2025-06-22", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-28", "2025-06-29", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04", "2025-07-05", "2025-07-06", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-12", "2025-07-13", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-19", "2025-07-20", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-26", "2025-07-27", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-02", "2025-08-03", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-09", "2025-08-10", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-16", "2025-08-17", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-23", "2025-08-24", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-08-30", "2025-08-31", "2025-09-01", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-06", "2025-09-07", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-13", "2025-09-14", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-20", "2025-09-21", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-27"], "nav_values": [99783.56, 103017.36, 102451.99, 101756.59, 102401.96, 99576.9, 100778.02, 99879.33, 96578.14, 95875.86, 95179.58, 92367.01, 92047.46, 96704.48, 93486.06, 97755.49, 95369.51, 102838.8, 96156.46, 88384.47, 85543.07, 83629.1, 87093.55, 85481.72, 89980.61, 88485.52, 91070.57, 87472.7, 85249.98, 87876.08, 87538.88, 90915.13, 93488.99, 95288.05, 90940.21, 87007.3, 85037.13, 86129.64, 83492.37, 83079.97, 82178.57, 79968.37, 84139.0, 86681.59, 86102.43, 88152.92, 87462.24, 92964.79, 91666.97, 90031.19, 88059.86, 88381.96, 88183.29, 88636.72, 89766.54, 93673.68, 92917.84, 93306.64, 91061.86, 97666.25, 99463.85, 102469.54, 99396.07, 106969.05, 109357.1, 117806.91, 123078.44, 125466.11, 131196.03, 133072.83, 119482.81, 114949.87, 112093.81, 113607.51, 115325.68, 112398.82, 112426.34, 113047.82, 111008.13, 110364.52, 111059.19, 109585.04, 108386.1, 108258.31, 105737.76, 107149.87, 108756.8, 107408.14, 106495.06, 105985.3, 108426.54, 104149.94, 108906.38, 107176.06, 105749.87, 108555.49, 115215.48, 110413.14, 112218.54, 118944.55, 127920.27, 123243.89, 125466.06, 123225.01, 122033.32, 128990.49, 125661.14, 125226.39, 123979.26, 126358.08, 127469.21, 133538.46, 131782.49, 133738.12, 132805.03, 131265.27, 128554.64, 133589.1, 132347.13, 131936.23, 134060.1, 134403.1, 135959.02, 134373.72, 129560.66, 129514.19, 130807.56, 138213.23, 139998.3, 137119.81, 141263.42, 132690.82, 143149.31, 147458.69, 150666.86, 147144.26, 148373.21, 150542.93, 144800.83, 136462.53, 138951.41, 139835.96, 139044.78, 139595.81, 140829.21, 145014.3, 142576.16, 145111.92, 151939.95, 150608.8, 160666.15, 163306.55, 165021.93, 162909.9, 156640.89, 153155.05, 157436.6, 160629.59, 161309.97, 163002.71, 163270.57, 165230.11, 163668.15, 162106.51, 163546.59, 163948.5, 167268.58, 171512.07, 172346.02, 167188.25, 167932.95, 167654.12, 164424.89, 168066.88, 175742.35, 180898.68, 187881.86, 180243.8, 181387.41, 179412.08, 175801.32, 176739.73, 181008.16, 174984.13, 177608.37, 176367.35, 175323.94, 176308.95, 181163.13, 186002.04, 187484.85, 191924.54, 190929.11, 191664.12, 201510.53, 206753.03, 216195.26, 206327.55, 204085.95, 202922.44, 202104.18, 205787.65, 210409.32, 207471.36, 205616.66, 195473.08, 193398.87, 194833.2, 198319.8, 196315.91, 189353.98, 191767.32, 192010.27, 190706.9, 200601.39, 200278.41, 197743.26, 196778.16, 197264.41, 189181.69, 199842.53, 201287.62, 197281.33, 193864.29, 189146.49, 200750.81, 211715.87, 209174.83, 210335.21, 216814.47, 210517.74, 223956.03, 221620.91, 217876.95, 219441.87, 214151.18, 222554.15, 220486.53, 218786.71, 215038.36, 214402.59, 206822.86, 204957.95, 199831.31, 202279.11, 202830.42, 203700.54, 207121.34, 206146.56, 207053.98, 205547.3, 199746.75, 200602.7, 198572.43, 202136.31, 202940.38, 204747.2, 201106.69, 205671.58, 201238.23, 207236.86, 210880.46, 210395.35, 209231.8, 209800.97, 207213.49, 208268.96, 210785.01, 209747.47, 211519.27], "cumulative_returns": [-0.22, 3.02, 2.45, 1.76, 2.4, -0.42, 0.78, -0.12, -3.42, -4.12, -4.82, -7.63, -7.95, -3.3, -6.51, -2.24, -4.63, 2.84, -3.84, -11.62, -14.46, -16.37, -12.91, -14.52, -10.02, -11.51, -8.93, -12.53, -14.75, -12.12, -12.46, -9.08, -6.51, -4.71, -9.06, -12.99, -14.96, -13.87, -16.51, -16.92, -17.82, -20.03, -15.86, -13.32, -13.9, -11.85, -12.54, -7.04, -8.33, -9.97, -11.94, -11.62, -11.82, -11.36, -10.23, -6.33, -7.08, -6.69, -8.94, -2.33, -0.54, 2.47, -0.6, 6.97, 9.36, 17.81, 23.08, 25.47, 31.2, 33.07, 19.48, 14.95, 12.09, 13.61, 15.33, 12.4, 12.43, 13.05, 11.01, 10.36, 11.06, 9.59, 8.39, 8.26, 5.74, 7.15, 8.76, 7.41, 6.5, 5.99, 8.43, 4.15, 8.91, 7.18, 5.75, 8.56, 15.22, 10.41, 12.22, 18.94, 27.92, 23.24, 25.47, 23.23, 22.03, 28.99, 25.66, 25.23, 23.98, 26.36, 27.47, 33.54, 31.78, 33.74, 32.81, 31.27, 28.55, 33.59, 32.35, 31.94, 34.06, 34.4, 35.96, 34.37, 29.56, 29.51, 30.81, 38.21, 40.0, 37.12, 41.26, 32.69, 43.15, 47.46, 50.67, 47.14, 48.37, 50.54, 44.8, 36.46, 38.95, 39.84, 39.04, 39.6, 40.83, 45.01, 42.58, 45.11, 51.94, 50.61, 60.67, 63.31, 65.02, 62.91, 56.64, 53.16, 57.44, 60.63, 61.31, 63.0, 63.27, 65.23, 63.67, 62.11, 63.55, 63.95, 67.27, 71.51, 72.35, 67.19, 67.93, 67.65, 64.42, 68.07, 75.74, 80.9, 87.88, 80.24, 81.39, 79.41, 75.8, 76.74, 81.01, 74.98, 77.61, 76.37, 75.32, 76.31, 81.16, 86.0, 87.48, 91.92, 90.93, 91.66, 101.51, 106.75, 116.2, 106.33, 104.09, 102.92, 102.1, 105.79, 110.41, 107.47, 105.62, 95.47, 93.4, 94.83, 98.32, 96.32, 89.35, 91.77, 92.01, 90.71, 100.6, 100.28, 97.74, 96.78, 97.26, 89.18, 99.84, 101.29, 97.28, 93.86, 89.15, 100.75, 111.72, 109.17, 110.34, 116.81, 110.52, 123.96, 121.62, 117.88, 119.44, 114.15, 122.55, 120.49, 118.79, 115.04, 114.4, 106.82, 104.96, 99.83, 102.28, 102.83, 103.7, 107.12, 106.15, 107.05, 105.55, 99.75, 100.6, 98.57, 102.14, 102.94, 104.75, 101.11, 105.67, 101.24, 107.24, 110.88, 110.4, 109.23, 109.8, 107.21, 108.27, 110.79, 109.75, 111.52], "drawdowns": [0.0, 0.0, -0.55, -1.22, -0.6, -3.34, -2.17, -3.05, -6.25, -6.93, -7.61, -10.34, -10.65, -6.13, -9.25, -5.11, -7.42, -0.17, -6.66, -14.2, -16.96, -18.82, -15.46, -17.02, -12.65, -14.11, -11.6, -15.09, -17.25, -14.7, -15.03, -11.75, -9.25, -7.5, -11.72, -15.54, -17.45, -16.39, -18.95, -19.35, -20.23, -22.37, -18.33, -15.86, -16.42, -14.43, -15.1, -9.76, -11.02, -12.61, -14.52, -14.21, -14.4, -13.96, -12.86, -9.07, -9.8, -9.43, -11.61, -5.19, -3.45, -0.53, -3.52, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -10.21, -13.62, -15.77, -14.63, -13.34, -15.54, -15.52, -15.05, -16.58, -17.06, -16.54, -17.65, -18.55, -18.65, -20.54, -19.48, -18.27, -19.29, -19.97, -20.36, -18.52, -21.73, -18.16, -19.46, -20.53, -18.42, -13.42, -17.03, -15.67, -10.62, -3.87, -7.39, -5.72, -7.4, -8.3, -3.07, -5.57, -5.9, -6.83, -5.05, -4.21, 0.0, -1.31, 0.0, -0.7, -1.85, -3.88, -0.11, -1.04, -1.35, 0.0, 0.0, 0.0, -1.17, -4.71, -4.74, -3.79, 0.0, 0.0, -2.06, 0.0, -6.07, 0.0, 0.0, 0.0, -2.34, -1.52, -0.08, -3.89, -9.43, -7.78, -7.19, -7.71, -7.35, -6.53, -3.75, -5.37, -3.69, 0.0, -0.88, 0.0, 0.0, 0.0, -1.28, -5.08, -7.19, -4.6, -2.66, -2.25, -1.22, -1.06, 0.0, -0.95, -1.89, -1.02, -0.78, 0.0, 0.0, 0.0, -2.99, -2.56, -2.72, -4.6, -2.48, 0.0, 0.0, 0.0, -4.07, -3.46, -4.51, -6.43, -5.93, -3.66, -6.86, -5.47, -6.13, -6.68, -6.16, -3.58, -1.0, -0.21, 0.0, -0.52, -0.14, 0.0, 0.0, 0.0, -4.56, -5.6, -6.14, -6.52, -4.81, -2.68, -4.04, -4.89, -9.58, -10.54, -9.88, -8.27, -9.2, -12.42, -11.3, -11.19, -11.79, -7.21, -7.36, -8.53, -8.98, -8.76, -12.49, -7.56, -6.9, -8.75, -10.33, -12.51, -7.14, -2.07, -3.25, -2.71, 0.0, -2.9, 0.0, -1.04, -2.71, -2.02, -4.38, -0.63, -1.55, -2.31, -3.98, -4.27, -7.65, -8.48, -10.77, -9.68, -9.43, -9.04, -7.52, -7.95, -7.55, -8.22, -10.81, -10.43, -11.33, -9.74, -9.38, -8.58, -10.2, -8.16, -10.14, -7.47, -5.84, -6.06, -6.57, -6.32, -7.48, -7.0, -5.88, -6.34, -5.55], "initial_capital": 100000, "max_drawdown_point": {"date": "2025-02-11", "value": -22.37}};
        
        // 通用图表配置
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
                intersect: false,
                mode: 'index'
            },
            plugins: {
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    titleColor: 'white',
                    bodyColor: 'white',
                    borderColor: '#007bff',
                    borderWidth: 1,
                    cornerRadius: 5,
                    displayColors: false,
                    callbacks: {
                        title: function(context) {
                            return '日期: ' + context[0].label;
                        }
                    }
                },
                legend: {
                    display: true,
                    position: 'top'
                }
            },
            scales: {
                x: {
                    type: 'category',
                    display: true,
                    title: {
                        display: true,
                        text: '日期'
                    },
                    grid: {
                        display: true,
                        color: 'rgba(0,0,0,0.1)'
                    }
                },
                y: {
                    display: true,
                    grid: {
                        display: true,
                        color: 'rgba(0,0,0,0.1)'
                    }
                }
            }
        };

        // 1. 净值曲线图
        const navCtx = document.getElementById('navChart').getContext('2d');
        new Chart(navCtx, {
            type: 'line',
            data: {
                labels: chartData.dates,
                datasets: [
                    {
                        label: '净值曲线',
                        data: chartData.nav_values,
                        borderColor: '#007bff',
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 5
                    },
                    {
                        label: '初始资金线',
                        data: Array(chartData.dates.length).fill(chartData.initial_capital),
                        borderColor: '#6c757d',
                        backgroundColor: 'transparent',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0,
                        pointHoverRadius: 0
                    }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: {
                            display: true,
                            text: '净值 ($)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    }
                },
                plugins: {
                    ...commonOptions.plugins,
                    tooltip: {
                        ...commonOptions.plugins.tooltip,
                        callbacks: {
                            ...commonOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return '净值: $' + context.parsed.y.toLocaleString();
                                } else {
                                    return '初始资金: $' + context.parsed.y.toLocaleString();
                                }
                            }
                        }
                    }
                }
            }
        });

        // 2. 累计收益率图
        const returnCtx = document.getElementById('returnChart').getContext('2d');
        new Chart(returnCtx, {
            type: 'line',
            data: {
                labels: chartData.dates,
                datasets: [
                    {
                        label: '累计收益率',
                        data: chartData.cumulative_returns,
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 5
                    },
                    {
                        label: '零基准线',
                        data: Array(chartData.dates.length).fill(0),
                        borderColor: '#6c757d',
                        backgroundColor: 'transparent',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0,
                        pointHoverRadius: 0
                    }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: {
                            display: true,
                            text: '收益率 (%)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(1) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    ...commonOptions.plugins,
                    tooltip: {
                        ...commonOptions.plugins.tooltip,
                        callbacks: {
                            ...commonOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return '累计收益率: ' + context.parsed.y.toFixed(2) + '%';
                                } else {
                                    return '零基准线: 0%';
                                }
                            }
                        }
                    }
                }
            }
        });

        // 3. 回撤分析图
        const drawdownCtx = document.getElementById('drawdownChart').getContext('2d');
        const drawdownChart = new Chart(drawdownCtx, {
            type: 'line',
            data: {
                labels: chartData.dates,
                datasets: [
                    {
                        label: '回撤曲线',
                        data: chartData.drawdowns,
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.2)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 5
                    }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: {
                            display: true,
                            text: '回撤 (%)'
                        },
                        max: 0,
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(1) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    ...commonOptions.plugins,
                    tooltip: {
                        ...commonOptions.plugins.tooltip,
                        callbacks: {
                            ...commonOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                return '回撤: ' + context.parsed.y.toFixed(2) + '%';
                            }
                        }
                    }
                }
            }
        });

        // 标记最大回撤点
        if (chartData.max_drawdown_point) {
            const maxDDIndex = chartData.dates.indexOf(chartData.max_drawdown_point.date);
            if (maxDDIndex !== -1) {
                // 添加最大回撤点标记
                drawdownChart.data.datasets.push({
                    label: '最大回撤点',
                    data: chartData.dates.map((date, index) => 
                        index === maxDDIndex ? chartData.max_drawdown_point.value : null
                    ),
                    borderColor: '#ff6b6b',
                    backgroundColor: '#ff6b6b',
                    borderWidth: 3,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    showLine: false,
                    fill: false
                });
                drawdownChart.update();
            }
        }
    </script>
</body>
</html>
        