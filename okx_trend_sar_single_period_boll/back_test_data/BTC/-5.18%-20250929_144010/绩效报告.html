
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC - SAR Single Period Trend Filter 策略绩效报告</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 30px;
        }
        .header {
            text-align: center;
            border-bottom: 3px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #007bff;
            margin: 0;
            font-size: 2.5rem;
        }
        .header p {
            color: #666;
            margin: 10px 0 0 0;
            font-size: 1.1rem;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .metric-card.positive {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        .metric-card.negative {
            background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
        }
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .chart-container {
            margin: 40px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
        }
        .chart-wrapper {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        .chart-title {
            text-align: center;
            color: #007bff;
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: bold;
        }
        .section {
            margin: 40px 0;
        }
        .section h2 {
            color: #007bff;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .nav-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        .nav-table th, .nav-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .nav-table th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        .nav-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .nav-table tr:hover {
            background-color: #f5f5f5;
        }
        .summary-box {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📈 BTC - SAR Single Period Trend Filter 策略绩效报告</h1>
            <p>生成时间: 2025-09-29 14:40:16</p>
            <p>回测期间: 2024-01-01 至 2024-12-31 (366 天)</p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card negative">
                <div class="metric-label">💰 总收益率</div>
                <div class="metric-value">-5.20%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">📈 年化收益率</div>
                <div class="metric-value">-5.18%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">⚠️ 最大回撤</div>
                <div class="metric-value">-42.63%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">🎯 夏普比率</div>
                <div class="metric-value">-0.23</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">📉 年化波动率</div>
                <div class="metric-value">35.30%</div>
            </div>
            <div class="metric-card positive">
                <div class="metric-label">🎯 胜率</div>
                <div class="metric-value">69.8%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">📊 盈亏比</div>
                <div class="metric-value">0.99</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">🔄 总交易次数</div>
                <div class="metric-value">758</div>
            </div>
        </div>
        
        <div class="summary-box">
            <h3>📊 资金概览</h3>
            <p><strong>初始资金:</strong> $100,000.00</p>
            <p><strong>最终净值:</strong> $94,804.33</p>
            <p><strong>净盈亏:</strong> $-5,195.67</p>
        </div>
        
        <div class="summary-box">
            <h3>📈 交易统计</h3>
            <p><strong>总交易次数:</strong> 758 次</p>
            <p><strong>盈利交易:</strong> 529 次</p>
            <p><strong>亏损交易:</strong> 229 次</p>
            <p><strong>胜率:</strong> 69.8%</p>
            <p><strong>盈亏比:</strong> 0.99</p>
        </div>
        
        <div class="summary-box">
            <h3>⚙️ 策略配置</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4>📊 单周期SAR策略参数</h4>
                    <p><strong>时间周期:</strong> 1h</p>
                    <p><strong>指标周期:</strong> 14</p>
                </div>
                <div>
                    <h4>🎯 SAR参数</h4>
                    <p><strong>起始值:</strong> 0.005</p>
                    <p><strong>递增值:</strong> 0.005</p>
                    <p><strong>最大值:</strong> 0.04</p>
                </div>
            </div>
            <div style="margin-top: 15px;">
                <h4>💰 止盈止损配置</h4>
                <p><strong>固定止盈:</strong> 0.8%</p>
                <p><strong>最大亏损:</strong> 0.0%</p>
            </div>
        </div>
        
        <div class="chart-container">
            <h2>📈 绩效图表</h2>
            
            <div class="chart-title">💰 净值曲线</div>
            <div class="chart-wrapper">
                <canvas id="navChart"></canvas>
            </div>
            
            <div class="chart-title">📊 累计收益率</div>
            <div class="chart-wrapper">
                <canvas id="returnChart"></canvas>
            </div>
            
            <div class="chart-title">📉 回撤分析</div>
            <div class="chart-wrapper">
                <canvas id="drawdownChart"></canvas>
            </div>
        </div>
        
        <div class="section">
            <h2>📋 每日净值明细</h2>
            <table class="nav-table">
        <thead>
            <tr>
                <th>日期</th>
                <th>价格</th>
                <th>持仓</th>
                <th>持仓价值</th>
                <th>现金余额</th>
                <th>总净值</th>
                <th>日收益率</th>
                <th>累计收益率</th>
                <th>回撤</th>
            </tr>
        </thead>
        <tbody>
        
            <tr>
                <td>2024-12-02</td>
                <td>$97,049.50</td>
                <td>short</td>
                <td>$90,275.44</td>
                <td>$17.69</td>
                <td>$90,293.13</td>
                <td>+0.74%</td>
                <td>-9.71%</td>
                <td>-19.66%</td>
            </tr>
            
            <tr>
                <td>2024-12-03</td>
                <td>$95,703.10</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$89,146.27</td>
                <td>$89,146.27</td>
                <td>-1.27%</td>
                <td>-10.85%</td>
                <td>-20.68%</td>
            </tr>
            
            <tr>
                <td>2024-12-04</td>
                <td>$95,769.90</td>
                <td>long</td>
                <td>$88,606.31</td>
                <td>$17.87</td>
                <td>$88,624.18</td>
                <td>-0.59%</td>
                <td>-11.38%</td>
                <td>-21.14%</td>
            </tr>
            
            <tr>
                <td>2024-12-05</td>
                <td>$101,344.20</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$91,522.63</td>
                <td>$91,522.63</td>
                <td>+3.27%</td>
                <td>-8.48%</td>
                <td>-18.56%</td>
            </tr>
            
            <tr>
                <td>2024-12-06</td>
                <td>$99,326.80</td>
                <td>short</td>
                <td>$93,188.40</td>
                <td>$18.41</td>
                <td>$93,206.81</td>
                <td>+1.84%</td>
                <td>-6.79%</td>
                <td>-17.06%</td>
            </tr>
            
            <tr>
                <td>2024-12-07</td>
                <td>$99,739.50</td>
                <td>long</td>
                <td>$89,187.06</td>
                <td>$17.96</td>
                <td>$89,205.02</td>
                <td>-4.29%</td>
                <td>-10.79%</td>
                <td>-20.62%</td>
            </tr>
            
            <tr>
                <td>2024-12-08</td>
                <td>$99,915.20</td>
                <td>long</td>
                <td>$89,344.17</td>
                <td>$17.96</td>
                <td>$89,362.13</td>
                <td>+0.18%</td>
                <td>-10.64%</td>
                <td>-20.48%</td>
            </tr>
            
            <tr>
                <td>2024-12-09</td>
                <td>$97,813.80</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$91,214.68</td>
                <td>$91,214.68</td>
                <td>+2.07%</td>
                <td>-8.79%</td>
                <td>-18.84%</td>
            </tr>
            
            <tr>
                <td>2024-12-10</td>
                <td>$95,672.00</td>
                <td>long</td>
                <td>$93,050.59</td>
                <td>$19.01</td>
                <td>$93,069.59</td>
                <td>+2.03%</td>
                <td>-6.93%</td>
                <td>-17.18%</td>
            </tr>
            
            <tr>
                <td>2024-12-11</td>
                <td>$100,367.90</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$90,927.48</td>
                <td>$90,927.48</td>
                <td>-2.30%</td>
                <td>-9.07%</td>
                <td>-19.09%</td>
            </tr>
            
            <tr>
                <td>2024-12-12</td>
                <td>$101,798.00</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$92,387.82</td>
                <td>$92,387.82</td>
                <td>+1.61%</td>
                <td>-7.61%</td>
                <td>-17.79%</td>
            </tr>
            
            <tr>
                <td>2024-12-13</td>
                <td>$99,867.60</td>
                <td>short</td>
                <td>$91,179.12</td>
                <td>$18.22</td>
                <td>$91,197.34</td>
                <td>-1.29%</td>
                <td>-8.80%</td>
                <td>-18.85%</td>
            </tr>
            
            <tr>
                <td>2024-12-14</td>
                <td>$101,620.10</td>
                <td>long</td>
                <td>$89,446.01</td>
                <td>$17.99</td>
                <td>$89,464.00</td>
                <td>-1.90%</td>
                <td>-10.54%</td>
                <td>-20.39%</td>
            </tr>
            
            <tr>
                <td>2024-12-15</td>
                <td>$102,683.10</td>
                <td>long</td>
                <td>$90,545.96</td>
                <td>$18.13</td>
                <td>$90,564.09</td>
                <td>+1.23%</td>
                <td>-9.44%</td>
                <td>-19.41%</td>
            </tr>
            
            <tr>
                <td>2024-12-16</td>
                <td>$106,319.40</td>
                <td>short</td>
                <td>$92,838.10</td>
                <td>$18.11</td>
                <td>$92,856.21</td>
                <td>+2.53%</td>
                <td>-7.14%</td>
                <td>-17.37%</td>
            </tr>
            
            <tr>
                <td>2024-12-17</td>
                <td>$106,475.90</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$89,342.35</td>
                <td>$89,342.35</td>
                <td>-3.78%</td>
                <td>-10.66%</td>
                <td>-20.50%</td>
            </tr>
            
            <tr>
                <td>2024-12-18</td>
                <td>$104,413.70</td>
                <td>short</td>
                <td>$89,691.37</td>
                <td>$17.87</td>
                <td>$89,709.24</td>
                <td>+0.41%</td>
                <td>-10.29%</td>
                <td>-20.17%</td>
            </tr>
            
            <tr>
                <td>2024-12-19</td>
                <td>$100,671.00</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$90,807.17</td>
                <td>$90,807.17</td>
                <td>+1.22%</td>
                <td>-9.19%</td>
                <td>-19.20%</td>
            </tr>
            
            <tr>
                <td>2024-12-20</td>
                <td>$96,977.50</td>
                <td>short</td>
                <td>$99,595.89</td>
                <td>$19.05</td>
                <td>$99,614.94</td>
                <td>+9.70%</td>
                <td>-0.39%</td>
                <td>-11.36%</td>
            </tr>
            
            <tr>
                <td>2024-12-21</td>
                <td>$97,517.40</td>
                <td>long</td>
                <td>$92,241.71</td>
                <td>$18.67</td>
                <td>$92,260.38</td>
                <td>-7.38%</td>
                <td>-7.74%</td>
                <td>-17.90%</td>
            </tr>
            
            <tr>
                <td>2024-12-22</td>
                <td>$95,373.50</td>
                <td>short</td>
                <td>$91,749.31</td>
                <td>$18.36</td>
                <td>$91,767.66</td>
                <td>-0.53%</td>
                <td>-8.23%</td>
                <td>-18.34%</td>
            </tr>
            
            <tr>
                <td>2024-12-23</td>
                <td>$93,260.00</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$90,587.57</td>
                <td>$90,587.57</td>
                <td>-1.29%</td>
                <td>-9.41%</td>
                <td>-19.39%</td>
            </tr>
            
            <tr>
                <td>2024-12-24</td>
                <td>$98,303.80</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$89,612.96</td>
                <td>$89,612.96</td>
                <td>-1.08%</td>
                <td>-10.39%</td>
                <td>-20.26%</td>
            </tr>
            
            <tr>
                <td>2024-12-25</td>
                <td>$98,526.40</td>
                <td>long</td>
                <td>$91,097.51</td>
                <td>$18.21</td>
                <td>$91,115.72</td>
                <td>+1.68%</td>
                <td>-8.88%</td>
                <td>-18.92%</td>
            </tr>
            
            <tr>
                <td>2024-12-26</td>
                <td>$96,033.30</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$92,003.49</td>
                <td>$92,003.49</td>
                <td>+0.97%</td>
                <td>-8.00%</td>
                <td>-18.13%</td>
            </tr>
            
            <tr>
                <td>2024-12-27</td>
                <td>$94,571.90</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$94,228.87</td>
                <td>$94,228.87</td>
                <td>+2.42%</td>
                <td>-5.77%</td>
                <td>-16.15%</td>
            </tr>
            
            <tr>
                <td>2024-12-28</td>
                <td>$94,442.50</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$93,941.73</td>
                <td>$93,941.73</td>
                <td>-0.30%</td>
                <td>-6.06%</td>
                <td>-16.41%</td>
            </tr>
            
            <tr>
                <td>2024-12-29</td>
                <td>$94,514.80</td>
                <td>long</td>
                <td>$93,891.00</td>
                <td>$18.94</td>
                <td>$93,909.94</td>
                <td>-0.03%</td>
                <td>-6.09%</td>
                <td>-16.44%</td>
            </tr>
            
            <tr>
                <td>2024-12-30</td>
                <td>$92,118.60</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$94,052.06</td>
                <td>$94,052.06</td>
                <td>+0.15%</td>
                <td>-5.95%</td>
                <td>-16.31%</td>
            </tr>
            
            <tr>
                <td>2024-12-31</td>
                <td>$95,428.10</td>
                <td>空仓</td>
                <td>$0.00</td>
                <td>$94,804.33</td>
                <td>$94,804.33</td>
                <td>+0.80%</td>
                <td>-5.20%</td>
                <td>-15.64%</td>
            </tr>
            </tbody></table><p style="text-align: center; color: #666; margin-top: 10px;">* 仅显示最近30天数据，完整数据共366天</p>
        </div>
        
        <div class="footer">
            <p>🤖 由 SAR Single Period Trend Filter 策略自动生成</p>
        </div>
    </div>

    <script>
        // 图表数据
        const chartData = {"dates": ["2024-01-01", "2024-01-02", "2024-01-03", "2024-01-04", "2024-01-05", "2024-01-06", "2024-01-07", "2024-01-08", "2024-01-09", "2024-01-10", "2024-01-11", "2024-01-12", "2024-01-13", "2024-01-14", "2024-01-15", "2024-01-16", "2024-01-17", "2024-01-18", "2024-01-19", "2024-01-20", "2024-01-21", "2024-01-22", "2024-01-23", "2024-01-24", "2024-01-25", "2024-01-26", "2024-01-27", "2024-01-28", "2024-01-29", "2024-01-30", "2024-01-31", "2024-02-01", "2024-02-02", "2024-02-03", "2024-02-04", "2024-02-05", "2024-02-06", "2024-02-07", "2024-02-08", "2024-02-09", "2024-02-10", "2024-02-11", "2024-02-12", "2024-02-13", "2024-02-14", "2024-02-15", "2024-02-16", "2024-02-17", "2024-02-18", "2024-02-19", "2024-02-20", "2024-02-21", "2024-02-22", "2024-02-23", "2024-02-24", "2024-02-25", "2024-02-26", "2024-02-27", "2024-02-28", "2024-02-29", "2024-03-01", "2024-03-02", "2024-03-03", "2024-03-04", "2024-03-05", "2024-03-06", "2024-03-07", "2024-03-08", "2024-03-09", "2024-03-10", "2024-03-11", "2024-03-12", "2024-03-13", "2024-03-14", "2024-03-15", "2024-03-16", "2024-03-17", "2024-03-18", "2024-03-19", "2024-03-20", "2024-03-21", "2024-03-22", "2024-03-23", "2024-03-24", "2024-03-25", "2024-03-26", "2024-03-27", "2024-03-28", "2024-03-29", "2024-03-30", "2024-03-31", "2024-04-01", "2024-04-02", "2024-04-03", "2024-04-04", "2024-04-05", "2024-04-06", "2024-04-07", "2024-04-08", "2024-04-09", "2024-04-10", "2024-04-11", "2024-04-12", "2024-04-13", "2024-04-14", "2024-04-15", "2024-04-16", "2024-04-17", "2024-04-18", "2024-04-19", "2024-04-20", "2024-04-21", "2024-04-22", "2024-04-23", "2024-04-24", "2024-04-25", "2024-04-26", "2024-04-27", "2024-04-28", "2024-04-29", "2024-04-30", "2024-05-01", "2024-05-02", "2024-05-03", "2024-05-04", "2024-05-05", "2024-05-06", "2024-05-07", "2024-05-08", "2024-05-09", "2024-05-10", "2024-05-11", "2024-05-12", "2024-05-13", "2024-05-14", "2024-05-15", "2024-05-16", "2024-05-17", "2024-05-18", "2024-05-19", "2024-05-20", "2024-05-21", "2024-05-22", "2024-05-23", "2024-05-24", "2024-05-25", "2024-05-26", "2024-05-27", "2024-05-28", "2024-05-29", "2024-05-30", "2024-05-31", "2024-06-01", "2024-06-02", "2024-06-03", "2024-06-04", "2024-06-05", "2024-06-06", "2024-06-07", "2024-06-08", "2024-06-09", "2024-06-10", "2024-06-11", "2024-06-12", "2024-06-13", "2024-06-14", "2024-06-15", "2024-06-16", "2024-06-17", "2024-06-18", "2024-06-19", "2024-06-20", "2024-06-21", "2024-06-22", "2024-06-23", "2024-06-24", "2024-06-25", "2024-06-26", "2024-06-27", "2024-06-28", "2024-06-29", "2024-06-30", "2024-07-01", "2024-07-02", "2024-07-03", "2024-07-04", "2024-07-05", "2024-07-06", "2024-07-07", "2024-07-08", "2024-07-09", "2024-07-10", "2024-07-11", "2024-07-12", "2024-07-13", "2024-07-14", "2024-07-15", "2024-07-16", "2024-07-17", "2024-07-18", "2024-07-19", "2024-07-20", "2024-07-21", "2024-07-22", "2024-07-23", "2024-07-24", "2024-07-25", "2024-07-26", "2024-07-27", "2024-07-28", "2024-07-29", "2024-07-30", "2024-07-31", "2024-08-01", "2024-08-02", "2024-08-03", "2024-08-04", "2024-08-05", "2024-08-06", "2024-08-07", "2024-08-08", "2024-08-09", "2024-08-10", "2024-08-11", "2024-08-12", "2024-08-13", "2024-08-14", "2024-08-15", "2024-08-16", "2024-08-17", "2024-08-18", "2024-08-19", "2024-08-20", "2024-08-21", "2024-08-22", "2024-08-23", "2024-08-24", "2024-08-25", "2024-08-26", "2024-08-27", "2024-08-28", "2024-08-29", "2024-08-30", "2024-08-31", "2024-09-01", "2024-09-02", "2024-09-03", "2024-09-04", "2024-09-05", "2024-09-06", "2024-09-07", "2024-09-08", "2024-09-09", "2024-09-10", "2024-09-11", "2024-09-12", "2024-09-13", "2024-09-14", "2024-09-15", "2024-09-16", "2024-09-17", "2024-09-18", "2024-09-19", "2024-09-20", "2024-09-21", "2024-09-22", "2024-09-23", "2024-09-24", "2024-09-25", "2024-09-26", "2024-09-27", "2024-09-28", "2024-09-29", "2024-09-30", "2024-10-01", "2024-10-02", "2024-10-03", "2024-10-04", "2024-10-05", "2024-10-06", "2024-10-07", "2024-10-08", "2024-10-09", "2024-10-10", "2024-10-11", "2024-10-12", "2024-10-13", "2024-10-14", "2024-10-15", "2024-10-16", "2024-10-17", "2024-10-18", "2024-10-19", "2024-10-20", "2024-10-21", "2024-10-22", "2024-10-23", "2024-10-24", "2024-10-25", "2024-10-26", "2024-10-27", "2024-10-28", "2024-10-29", "2024-10-30", "2024-10-31", "2024-11-01", "2024-11-02", "2024-11-03", "2024-11-04", "2024-11-05", "2024-11-06", "2024-11-07", "2024-11-08", "2024-11-09", "2024-11-10", "2024-11-11", "2024-11-12", "2024-11-13", "2024-11-14", "2024-11-15", "2024-11-16", "2024-11-17", "2024-11-18", "2024-11-19", "2024-11-20", "2024-11-21", "2024-11-22", "2024-11-23", "2024-11-24", "2024-11-25", "2024-11-26", "2024-11-27", "2024-11-28", "2024-11-29", "2024-11-30", "2024-12-01", "2024-12-02", "2024-12-03", "2024-12-04", "2024-12-05", "2024-12-06", "2024-12-07", "2024-12-08", "2024-12-09", "2024-12-10", "2024-12-11", "2024-12-12", "2024-12-13", "2024-12-14", "2024-12-15", "2024-12-16", "2024-12-17", "2024-12-18", "2024-12-19", "2024-12-20", "2024-12-21", "2024-12-22", "2024-12-23", "2024-12-24", "2024-12-25", "2024-12-26", "2024-12-27", "2024-12-28", "2024-12-29", "2024-12-30", "2024-12-31"], "nav_values": [97689.09, 98297.74, 97886.38, 101798.12, 95689.02, 96491.29, 96903.2, 92986.06, 93055.59, 95996.87, 99105.2, 96720.44, 98530.35, 97938.02, 97965.5, 98250.24, 97663.12, 97846.06, 99773.9, 100589.59, 100791.09, 100980.93, 105084.49, 106111.98, 105454.31, 106919.03, 106909.12, 107770.84, 108231.95, 110849.8, 112382.06, 109167.38, 105430.05, 105157.22, 104212.5, 105125.86, 106269.48, 101657.27, 103570.09, 105233.52, 104793.07, 103048.01, 104686.47, 104133.19, 101419.64, 102542.71, 102025.6, 102779.44, 101164.82, 102100.02, 100479.4, 101283.08, 99616.31, 97662.0, 100349.06, 98271.99, 95911.29, 95911.29, 98231.12, 101411.74, 101909.77, 97001.38, 97591.6, 100288.41, 98066.86, 92398.69, 94633.65, 96922.61, 96084.76, 97484.53, 96598.01, 97370.65, 95371.79, 94474.89, 98069.76, 90155.34, 92257.16, 83784.47, 82615.78, 82689.02, 84437.46, 83606.58, 84057.36, 86136.82, 88878.08, 89557.2, 87844.75, 84685.02, 82905.28, 83497.08, 83949.84, 79882.41, 81165.4, 80230.41, 81690.65, 82071.16, 78996.6, 80265.33, 82864.29, 83297.25, 84635.06, 84661.93, 84756.59, 85418.89, 83871.18, 84054.29, 82373.03, 83459.82, 83134.01, 77031.84, 77458.13, 78240.95, 80188.95, 80902.92, 78544.84, 80444.65, 79355.49, 80480.06, 78787.07, 79746.41, 76527.28, 79005.22, 79297.1, 81864.72, 82372.48, 83844.84, 83064.61, 83795.35, 85754.17, 87043.84, 86281.28, 86872.64, 87208.95, 86226.57, 84377.18, 82731.97, 82139.6, 78901.92, 79438.59, 80169.12, 80627.53, 76124.82, 76279.16, 76709.32, 79237.85, 76787.26, 77203.8, 75701.86, 75346.62, 75890.05, 76396.5, 76170.63, 76469.51, 75732.46, 76948.81, 75085.19, 75685.77, 76291.12, 76440.94, 75728.43, 75821.13, 75085.82, 73512.95, 73579.22, 73091.96, 73676.55, 74301.09, 73329.19, 73023.52, 71960.09, 71650.57, 72664.53, 73743.49, 73036.9, 72804.13, 72241.4, 71341.71, 71804.68, 69755.47, 68878.36, 69293.74, 69356.25, 70475.63, 70929.93, 72069.14, 74402.69, 74659.83, 71821.48, 70417.85, 66529.98, 70334.87, 69975.56, 67959.81, 68615.15, 65365.28, 66296.3, 68846.1, 66055.66, 65686.38, 65770.76, 64710.3, 64870.87, 65296.45, 64475.08, 65120.41, 65462.29, 68122.48, 68334.44, 69431.94, 69277.74, 66077.25, 66326.13, 67973.22, 69573.45, 67131.6, 69305.33, 70418.4, 70981.63, 73866.1, 73416.25, 73717.74, 73019.92, 73857.81, 73390.84, 74792.69, 74987.9, 77214.46, 79915.7, 77176.68, 78319.28, 79657.01, 80648.2, 79862.38, 80824.35, 77909.62, 79746.12, 79303.19, 80445.22, 79975.69, 82377.97, 85238.7, 85394.75, 86008.45, 87163.17, 84952.87, 84096.93, 83789.21, 85134.95, 82518.37, 84514.31, 83103.17, 81906.93, 84664.02, 85127.37, 87517.25, 87257.29, 88922.85, 88812.52, 89068.73, 90382.94, 91246.62, 90316.51, 91697.12, 91557.2, 91225.71, 90486.29, 91850.43, 91044.07, 88016.15, 86997.85, 89102.16, 88704.51, 88883.15, 87648.64, 86191.42, 89097.65, 85831.73, 83545.6, 83989.34, 84751.46, 84108.55, 83306.87, 83564.19, 83965.98, 84581.98, 85940.39, 86351.27, 85851.08, 86537.76, 86602.14, 86145.1, 87690.75, 87507.42, 88110.75, 86848.75, 88692.41, 86418.69, 85819.7, 87572.04, 89232.88, 88052.94, 90182.74, 91631.12, 90808.18, 91472.27, 87641.54, 87271.13, 88514.05, 89313.79, 89521.24, 91686.53, 93443.01, 95965.83, 93052.91, 91474.27, 94436.17, 94458.71, 92905.78, 93205.76, 95889.63, 91659.36, 91391.11, 89873.43, 89902.71, 91850.83, 93699.24, 96677.31, 93581.94, 93354.87, 90548.05, 94651.8, 93802.96, 93120.73, 91855.25, 90711.42, 89627.26, 90293.13, 89146.27, 88624.18, 91522.63, 93206.81, 89205.02, 89362.13, 91214.68, 93069.59, 90927.48, 92387.82, 91197.34, 89464.0, 90564.09, 92856.21, 89342.35, 89709.24, 90807.17, 99614.94, 92260.38, 91767.66, 90587.57, 89612.96, 91115.72, 92003.49, 94228.87, 93941.73, 93909.94, 94052.06, 94804.33], "cumulative_returns": [-2.31, -1.7, -2.11, 1.8, -4.31, -3.51, -3.1, -7.01, -6.94, -4.0, -0.89, -3.28, -1.47, -2.06, -2.03, -1.75, -2.34, -2.15, -0.23, 0.59, 0.79, 0.98, 5.08, 6.11, 5.45, 6.92, 6.91, 7.77, 8.23, 10.85, 12.38, 9.17, 5.43, 5.16, 4.21, 5.13, 6.27, 1.66, 3.57, 5.23, 4.79, 3.05, 4.69, 4.13, 1.42, 2.54, 2.03, 2.78, 1.16, 2.1, 0.48, 1.28, -0.38, -2.34, 0.35, -1.73, -4.09, -4.09, -1.77, 1.41, 1.91, -3.0, -2.41, 0.29, -1.93, -7.6, -5.37, -3.08, -3.92, -2.52, -3.4, -2.63, -4.63, -5.53, -1.93, -9.84, -7.74, -16.22, -17.38, -17.31, -15.56, -16.39, -15.94, -13.86, -11.12, -10.44, -12.16, -15.31, -17.09, -16.5, -16.05, -20.12, -18.83, -19.77, -18.31, -17.93, -21.0, -19.73, -17.14, -16.7, -15.36, -15.34, -15.24, -14.58, -16.13, -15.95, -17.63, -16.54, -16.87, -22.97, -22.54, -21.76, -19.81, -19.1, -21.46, -19.56, -20.64, -19.52, -21.21, -20.25, -23.47, -20.99, -20.7, -18.14, -17.63, -16.16, -16.94, -16.2, -14.25, -12.96, -13.72, -13.13, -12.79, -13.77, -15.62, -17.27, -17.86, -21.1, -20.56, -19.83, -19.37, -23.88, -23.72, -23.29, -20.76, -23.21, -22.8, -24.3, -24.65, -24.11, -23.6, -23.83, -23.53, -24.27, -23.05, -24.91, -24.31, -23.71, -23.56, -24.27, -24.18, -24.91, -26.49, -26.42, -26.91, -26.32, -25.7, -26.67, -26.98, -28.04, -28.35, -27.34, -26.26, -26.96, -27.2, -27.76, -28.66, -28.2, -30.24, -31.12, -30.71, -30.64, -29.52, -29.07, -27.93, -25.6, -25.34, -28.18, -29.58, -33.47, -29.67, -30.02, -32.04, -31.38, -34.63, -33.7, -31.15, -33.94, -34.31, -34.23, -35.29, -35.13, -34.7, -35.52, -34.88, -34.54, -31.88, -31.67, -30.57, -30.72, -33.92, -33.67, -32.03, -30.43, -32.87, -30.69, -29.58, -29.02, -26.13, -26.58, -26.28, -26.98, -26.14, -26.61, -25.21, -25.01, -22.79, -20.08, -22.82, -21.68, -20.34, -19.35, -20.14, -19.18, -22.09, -20.25, -20.7, -19.55, -20.02, -17.62, -14.76, -14.61, -13.99, -12.84, -15.05, -15.9, -16.21, -14.87, -17.48, -15.49, -16.9, -18.09, -15.34, -14.87, -12.48, -12.74, -11.08, -11.19, -10.93, -9.62, -8.75, -9.68, -8.3, -8.44, -8.77, -9.51, -8.15, -8.96, -11.98, -13.0, -10.9, -11.3, -11.12, -12.35, -13.81, -10.9, -14.17, -16.45, -16.01, -15.25, -15.89, -16.69, -16.44, -16.03, -15.42, -14.06, -13.65, -14.15, -13.46, -13.4, -13.85, -12.31, -12.49, -11.89, -13.15, -11.31, -13.58, -14.18, -12.43, -10.77, -11.95, -9.82, -8.37, -9.19, -8.53, -12.36, -12.73, -11.49, -10.69, -10.48, -8.31, -6.56, -4.03, -6.95, -8.53, -5.56, -5.54, -7.09, -6.79, -4.11, -8.34, -8.61, -10.13, -10.1, -8.15, -6.3, -3.32, -6.42, -6.65, -9.45, -5.35, -6.2, -6.88, -8.14, -9.29, -10.37, -9.71, -10.85, -11.38, -8.48, -6.79, -10.79, -10.64, -8.79, -6.93, -9.07, -7.61, -8.8, -10.54, -9.44, -7.14, -10.66, -10.29, -9.19, -0.39, -7.74, -8.23, -9.41, -10.39, -8.88, -8.0, -5.77, -6.06, -6.09, -5.95, -5.2], "drawdowns": [0.0, 0.0, -0.42, 0.0, -6.0, -5.21, -4.81, -8.66, -8.59, -5.7, -2.65, -4.99, -3.21, -3.79, -3.76, -3.49, -4.06, -3.88, -1.99, -1.19, -0.99, -0.8, 0.0, 0.0, -0.62, 0.0, -0.01, 0.0, 0.0, 0.0, 0.0, -2.86, -6.19, -6.43, -7.27, -6.46, -5.44, -9.54, -7.84, -6.36, -6.75, -8.31, -6.85, -7.34, -9.75, -8.76, -9.22, -8.54, -9.98, -9.15, -10.59, -9.88, -11.36, -13.1, -10.71, -12.56, -14.66, -14.66, -12.59, -9.76, -9.32, -13.69, -13.16, -10.76, -12.74, -17.78, -15.79, -13.76, -14.5, -13.26, -14.04, -13.36, -15.14, -15.93, -12.74, -19.78, -17.91, -25.45, -26.49, -26.42, -24.87, -25.61, -25.2, -23.35, -20.91, -20.31, -21.83, -24.65, -26.23, -25.7, -25.3, -28.92, -27.78, -28.61, -27.31, -26.97, -29.71, -28.58, -26.27, -25.88, -24.69, -24.67, -24.58, -23.99, -25.37, -25.21, -26.7, -25.74, -26.03, -31.46, -31.08, -30.38, -28.65, -28.01, -30.11, -28.42, -29.39, -28.39, -29.89, -29.04, -31.9, -29.7, -29.44, -27.15, -26.7, -25.39, -26.09, -25.44, -23.69, -22.55, -23.23, -22.7, -22.4, -23.27, -24.92, -26.38, -26.91, -29.79, -29.31, -28.66, -28.26, -32.26, -32.13, -31.74, -29.49, -31.67, -31.3, -32.64, -32.95, -32.47, -32.02, -32.22, -31.96, -32.61, -31.53, -33.19, -32.65, -32.11, -31.98, -32.62, -32.53, -33.19, -34.59, -34.53, -34.96, -34.44, -33.89, -34.75, -35.02, -35.97, -36.24, -35.34, -34.38, -35.01, -35.22, -35.72, -36.52, -36.11, -37.93, -38.71, -38.34, -38.29, -37.29, -36.89, -35.87, -33.79, -33.57, -36.09, -37.34, -40.8, -37.41, -37.73, -39.53, -38.94, -41.84, -41.01, -38.74, -41.22, -41.55, -41.48, -42.42, -42.28, -41.9, -42.63, -42.05, -41.75, -39.38, -39.19, -38.22, -38.36, -41.2, -40.98, -39.52, -38.09, -40.26, -38.33, -37.34, -36.84, -34.27, -34.67, -34.4, -35.03, -34.28, -34.7, -33.45, -33.27, -31.29, -28.89, -31.33, -30.31, -29.12, -28.24, -28.94, -28.08, -30.67, -29.04, -29.43, -28.42, -28.84, -26.7, -24.15, -24.01, -23.47, -22.44, -24.41, -25.17, -25.44, -24.25, -26.57, -24.8, -26.05, -27.12, -24.66, -24.25, -22.13, -22.36, -20.87, -20.97, -20.74, -19.58, -18.81, -19.63, -18.41, -18.53, -18.83, -19.48, -18.27, -18.99, -21.68, -22.59, -20.71, -21.07, -20.91, -22.01, -23.3, -20.72, -23.63, -25.66, -25.26, -24.59, -25.16, -25.87, -25.64, -25.29, -24.74, -23.53, -23.16, -23.61, -23.0, -22.94, -23.35, -21.97, -22.13, -21.6, -22.72, -21.08, -23.1, -23.64, -22.08, -20.6, -21.65, -19.75, -18.46, -19.2, -18.61, -22.01, -22.34, -21.24, -20.53, -20.34, -18.42, -16.85, -14.61, -17.2, -18.6, -15.97, -15.95, -17.33, -17.06, -14.68, -18.44, -18.68, -20.03, -20.0, -18.27, -16.62, -13.97, -16.73, -16.93, -19.43, -15.78, -16.53, -17.14, -18.27, -19.28, -20.25, -19.66, -20.68, -21.14, -18.56, -17.06, -20.62, -20.48, -18.84, -17.18, -19.09, -17.79, -18.85, -20.39, -19.41, -17.37, -20.5, -20.17, -19.2, -11.36, -17.9, -18.34, -19.39, -20.26, -18.92, -18.13, -16.15, -16.41, -16.44, -16.31, -15.64], "initial_capital": 100000, "max_drawdown_point": {"date": "2024-07-22", "value": -42.63}};
        
        // 通用图表配置
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
                intersect: false,
                mode: 'index'
            },
            plugins: {
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    titleColor: 'white',
                    bodyColor: 'white',
                    borderColor: '#007bff',
                    borderWidth: 1,
                    cornerRadius: 5,
                    displayColors: false,
                    callbacks: {
                        title: function(context) {
                            return '日期: ' + context[0].label;
                        }
                    }
                },
                legend: {
                    display: true,
                    position: 'top'
                }
            },
            scales: {
                x: {
                    type: 'category',
                    display: true,
                    title: {
                        display: true,
                        text: '日期'
                    },
                    grid: {
                        display: true,
                        color: 'rgba(0,0,0,0.1)'
                    }
                },
                y: {
                    display: true,
                    grid: {
                        display: true,
                        color: 'rgba(0,0,0,0.1)'
                    }
                }
            }
        };

        // 1. 净值曲线图
        const navCtx = document.getElementById('navChart').getContext('2d');
        new Chart(navCtx, {
            type: 'line',
            data: {
                labels: chartData.dates,
                datasets: [
                    {
                        label: '净值曲线',
                        data: chartData.nav_values,
                        borderColor: '#007bff',
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 5
                    },
                    {
                        label: '初始资金线',
                        data: Array(chartData.dates.length).fill(chartData.initial_capital),
                        borderColor: '#6c757d',
                        backgroundColor: 'transparent',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0,
                        pointHoverRadius: 0
                    }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: {
                            display: true,
                            text: '净值 ($)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    }
                },
                plugins: {
                    ...commonOptions.plugins,
                    tooltip: {
                        ...commonOptions.plugins.tooltip,
                        callbacks: {
                            ...commonOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return '净值: $' + context.parsed.y.toLocaleString();
                                } else {
                                    return '初始资金: $' + context.parsed.y.toLocaleString();
                                }
                            }
                        }
                    }
                }
            }
        });

        // 2. 累计收益率图
        const returnCtx = document.getElementById('returnChart').getContext('2d');
        new Chart(returnCtx, {
            type: 'line',
            data: {
                labels: chartData.dates,
                datasets: [
                    {
                        label: '累计收益率',
                        data: chartData.cumulative_returns,
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 5
                    },
                    {
                        label: '零基准线',
                        data: Array(chartData.dates.length).fill(0),
                        borderColor: '#6c757d',
                        backgroundColor: 'transparent',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0,
                        pointHoverRadius: 0
                    }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: {
                            display: true,
                            text: '收益率 (%)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(1) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    ...commonOptions.plugins,
                    tooltip: {
                        ...commonOptions.plugins.tooltip,
                        callbacks: {
                            ...commonOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return '累计收益率: ' + context.parsed.y.toFixed(2) + '%';
                                } else {
                                    return '零基准线: 0%';
                                }
                            }
                        }
                    }
                }
            }
        });

        // 3. 回撤分析图
        const drawdownCtx = document.getElementById('drawdownChart').getContext('2d');
        const drawdownChart = new Chart(drawdownCtx, {
            type: 'line',
            data: {
                labels: chartData.dates,
                datasets: [
                    {
                        label: '回撤曲线',
                        data: chartData.drawdowns,
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.2)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 5
                    }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: {
                            display: true,
                            text: '回撤 (%)'
                        },
                        max: 0,
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(1) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    ...commonOptions.plugins,
                    tooltip: {
                        ...commonOptions.plugins.tooltip,
                        callbacks: {
                            ...commonOptions.plugins.tooltip.callbacks,
                            label: function(context) {
                                return '回撤: ' + context.parsed.y.toFixed(2) + '%';
                            }
                        }
                    }
                }
            }
        });

        // 标记最大回撤点
        if (chartData.max_drawdown_point) {
            const maxDDIndex = chartData.dates.indexOf(chartData.max_drawdown_point.date);
            if (maxDDIndex !== -1) {
                // 添加最大回撤点标记
                drawdownChart.data.datasets.push({
                    label: '最大回撤点',
                    data: chartData.dates.map((date, index) => 
                        index === maxDDIndex ? chartData.max_drawdown_point.value : null
                    ),
                    borderColor: '#ff6b6b',
                    backgroundColor: '#ff6b6b',
                    borderWidth: 3,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    showLine: false,
                    fill: false
                });
                drawdownChart.update();
            }
        }
    </script>
</body>
</html>
        